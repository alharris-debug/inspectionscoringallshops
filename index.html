<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inspection Scoring Benchmark Analysis | AutoVitals</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%); min-height: 100vh; }
    
    .container { max-width: 1280px; margin: 0 auto; padding: 0 24px; }
    
    /* Header */
    .header { background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 50%, #4f46e5 100%); color: white; }
    .header-content { padding: 32px 0; }
    .header h1 { font-size: 28px; font-weight: 700; }
    .header p { color: #c7d2fe; font-size: 16px; margin-top: 8px; }
    
    /* Tabs */
    .tabs { display: flex; gap: 4px; border-bottom: 1px solid rgba(99, 102, 241, 0.3); overflow-x: auto; }
    .tab { padding: 12px 20px; font-size: 14px; font-weight: 500; border: none; background: transparent; color: #c7d2fe; cursor: pointer; border-radius: 8px 8px 0 0; white-space: nowrap; transition: all 0.2s; }
    .tab:hover { background: rgba(99, 102, 241, 0.3); color: white; }
    .tab.active { background: white; color: #4f46e5; }
    
    /* Content */
    .content { padding: 32px 0; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    
    /* Grid */
    .grid-5 { display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; margin-bottom: 24px; }
    .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
    .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 24px; }
    .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; margin-bottom: 24px; }
    @media (max-width: 1024px) { .grid-5, .grid-4 { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 768px) { .grid-5, .grid-2, .grid-4, .grid-3 { grid-template-columns: 1fr; } }
    
    /* Cards */
    .card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; margin-bottom: 24px; }
    .card h3 { font-size: 18px; font-weight: 700; color: #1e293b; margin-bottom: 16px; }
    .card h4 { font-size: 15px; font-weight: 600; color: #334155; margin-bottom: 12px; }
    
    /* Stat Cards */
    .stat-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; border-left: 4px solid #6366f1; }
    .stat-card .label { font-size: 11px; font-weight: 600; color: #64748b; text-transform: uppercase; letter-spacing: 0.5px; }
    .stat-card .value { font-size: 28px; font-weight: 700; margin-top: 4px; color: #6366f1; }
    .stat-card .subtitle { font-size: 12px; color: #94a3b8; margin-top: 4px; }
    
    /* Segment Cards */
    .segment-card { background: white; border-radius: 12px; padding: 16px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; text-align: center; }
    .segment-card .segment-label { font-size: 13px; font-weight: 600; color: #475569; margin-bottom: 8px; }
    .segment-card .segment-value { font-size: 32px; font-weight: 800; }
    .segment-card .segment-metric { font-size: 11px; color: #94a3b8; margin-top: 4px; }
    .segment-card .segment-count { font-size: 11px; color: #94a3b8; margin-top: 8px; padding-top: 8px; border-top: 1px solid #e2e8f0; }
    
    /* Alerts */
    .alert { padding: 16px 20px; border-radius: 12px; margin-bottom: 24px; }
    .alert-indigo { background: #eef2ff; border: 1px solid #c7d2fe; color: #3730a3; }
    .alert-green { background: #ecfdf5; border: 1px solid #a7f3d0; color: #065f46; }
    .alert-amber { background: #fffbeb; border: 1px solid #fcd34d; color: #92400e; }
    .alert-purple { background: #faf5ff; border: 1px solid #e9d5ff; color: #6b21a8; }
    .alert-rose { background: #fff1f2; border: 1px solid #fecdd3; color: #9f1239; }
    .alert strong { font-weight: 600; }
    
    /* Summary Box */
    .summary-box { background: linear-gradient(135deg, #eef2ff 0%, #faf5ff 100%); border-radius: 16px; padding: 24px; border: 1px solid #c7d2fe; margin-bottom: 24px; }
    .summary-box h3 { font-size: 20px; font-weight: 700; color: #1e293b; margin-bottom: 16px; }
    .summary-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    @media (max-width: 768px) { .summary-cols { grid-template-columns: 1fr; } }
    .summary-box h4 { font-size: 15px; font-weight: 600; color: #475569; margin-bottom: 12px; }
    .summary-box ul { list-style: none; }
    .summary-box li { display: flex; align-items: flex-start; gap: 8px; margin-bottom: 10px; font-size: 14px; color: #475569; }
    .check { color: #10b981; }
    .warn { color: #f59e0b; }
    .arrow { color: #6366f1; }
    
    /* Tables */
    table { width: 100%; border-collapse: collapse; font-size: 14px; }
    th { text-align: left; padding: 12px 16px; font-weight: 600; color: #475569; background: #f8fafc; border-bottom: 2px solid #e2e8f0; }
    td { padding: 12px 16px; border-bottom: 1px solid #f1f5f9; }
    tr:hover td { background: #f8fafc; }
    .text-right { text-align: right; }
    .text-center { text-align: center; }
    .text-red { color: #ef4444; }
    .text-orange { color: #f97316; }
    .text-blue { color: #3b82f6; }
    .text-green { color: #10b981; }
    .text-indigo { color: #6366f1; }
    .font-bold { font-weight: 700; }
    .font-mono { font-family: ui-monospace, monospace; }
    
    /* Heat Map Matrix */
    .matrix-table { width: 100%; border-collapse: collapse; }
    .matrix-table th, .matrix-table td { padding: 12px; text-align: center; font-size: 13px; }
    .matrix-table th { background: #f1f5f9; font-weight: 600; color: #475569; }
    .matrix-table td { font-weight: 600; }
    .matrix-table .row-header { background: #f1f5f9; font-weight: 600; color: #475569; text-align: left; }
    .heat-low { background: #dcfce7; color: #166534; }
    .heat-med-low { background: #fef9c3; color: #854d0e; }
    .heat-med { background: #fed7aa; color: #9a3412; }
    .heat-med-high { background: #fecaca; color: #991b1b; }
    .heat-high { background: #fca5a5; color: #7f1d1d; }
    
    /* Threshold Cards */
    .threshold-card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); border: 1px solid #e2e8f0; }
    .threshold-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px; }
    .threshold-header h4 { margin: 0 0 4px 0; }
    .threshold-header .weight { font-size: 13px; color: #64748b; }
    .badge { display: inline-block; padding: 4px 12px; border-radius: 9999px; font-size: 12px; font-weight: 600; background: #eef2ff; color: #4f46e5; }
    .threshold-bar { height: 32px; background: linear-gradient(90deg, #ef4444 0%, #f59e0b 50%, #10b981 100%); border-radius: 9999px; position: relative; margin-bottom: 8px; }
    .threshold-labels { display: flex; justify-content: space-between; font-size: 11px; color: #64748b; margin-bottom: 16px; }
    .threshold-labels span { text-align: center; }
    .threshold-rationale { font-size: 13px; color: #475569; font-style: italic; margin-bottom: 8px; }
    .threshold-insight { font-size: 12px; color: #6366f1; font-weight: 500; }
    
    /* Grade Cards */
    .grade-cards { display: grid; grid-template-columns: repeat(5, 1fr); gap: 12px; margin-top: 16px; }
    @media (max-width: 768px) { .grade-cards { grid-template-columns: repeat(3, 1fr); } }
    .grade-card { text-align: center; padding: 16px; border-radius: 12px; border: 2px solid; }
    .grade-card .grade { font-size: 36px; font-weight: 900; }
    .grade-card .range { font-size: 13px; font-weight: 600; color: #475569; margin-top: 4px; }
    .grade-card .label { font-size: 11px; color: #64748b; margin-top: 2px; }
    
    /* Score Simulator */
    .sim-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    @media (max-width: 768px) { .sim-grid { grid-template-columns: 1fr; } }
    .slider-group { margin-bottom: 20px; }
    .slider-group label { display: block; font-size: 14px; font-weight: 500; color: #334155; margin-bottom: 8px; }
    .slider-group label span { color: #6366f1; font-weight: 700; }
    .slider-group input[type="range"] { width: 100%; height: 8px; border-radius: 4px; background: #e2e8f0; appearance: none; cursor: pointer; }
    .slider-group input[type="range"]::-webkit-slider-thumb { appearance: none; width: 20px; height: 20px; border-radius: 50%; background: #6366f1; cursor: pointer; }
    .slider-hints { display: flex; justify-content: space-between; font-size: 11px; color: #94a3b8; margin-top: 4px; }
    .slider-hints .hint-orange { color: #f97316; }
    .slider-hints .hint-blue { color: #3b82f6; }
    .slider-hints .hint-green { color: #10b981; }
    
    .score-display { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 12px; padding: 24px; color: white; margin-bottom: 16px; }
    .score-display .title { color: #94a3b8; font-size: 14px; margin-bottom: 8px; }
    .score-row { display: flex; align-items: flex-end; gap: 16px; }
    .score-number { font-size: 72px; font-weight: 900; line-height: 1; }
    .score-grade { font-size: 32px; font-weight: 700; }
    .score-label { color: #94a3b8; font-size: 14px; }
    .score-bar { height: 12px; background: #334155; border-radius: 9999px; margin-top: 16px; overflow: hidden; }
    .score-bar-fill { height: 100%; border-radius: 9999px; transition: width 0.3s, background-color 0.3s; }
    
    .component-scores { margin-top: 16px; }
    .component-row { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
    .component-label { width: 100px; font-size: 13px; color: #64748b; }
    .component-bar { flex: 1; height: 20px; background: #e2e8f0; border-radius: 9999px; overflow: hidden; }
    .component-bar-fill { height: 100%; border-radius: 9999px; transition: width 0.3s; }
    .component-score { width: 40px; text-align: right; font-weight: 700; font-size: 14px; }
    .component-weight { width: 50px; font-size: 11px; color: #94a3b8; }
    
    .tips-box { margin-top: 16px; }
    .tips-box h4 { font-size: 14px; font-weight: 600; color: #92400e; margin-bottom: 8px; }
    .tips-box ul { margin-left: 20px; font-size: 13px; color: #92400e; }
    .tips-box li { margin-bottom: 4px; }
    
    /* Footer */
    .footer { background: #1e293b; color: #94a3b8; padding: 24px 0; margin-top: 48px; text-align: center; font-size: 14px; }
    .footer p { margin: 4px 0; }
    
    /* Chart container */
    .chart-container { position: relative; height: 250px; margin-bottom: 16px; }
    .chart-container-tall { position: relative; height: 300px; margin-bottom: 16px; }
    .chart-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    @media (max-width: 768px) { .chart-grid { grid-template-columns: 1fr; } }
    
    /* Insight box */
    .insight-box { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-radius: 12px; padding: 16px 20px; border: 1px solid #f59e0b; margin-bottom: 24px; }
    .insight-box h4 { color: #92400e; font-size: 15px; font-weight: 600; margin-bottom: 8px; }
    .insight-box p { color: #78350f; font-size: 14px; line-height: 1.5; }
    .insight-box ul { margin-left: 20px; color: #78350f; font-size: 14px; }
    .insight-box li { margin-bottom: 4px; }
  </style>
</head>
<body>

  <!-- Header -->
  <div class="header">
    <div class="container">
      <div class="header-content">
        <h1>üîç Inspection Scoring Benchmark Analysis</h1>
        <p>Data-driven thresholds from 1,889 shops ‚Ä¢ 151,655 benchmark inspections</p>
      </div>
      <div class="tabs">
        <button class="tab active" data-tab="overview">üìä Overview</button>
        <button class="tab" data-tab="segments">üöó Vehicle Segments</button>
        <button class="tab" data-tab="distributions">üìà Distributions</button>
        <button class="tab" data-tab="recommendations">üéØ Recommendations</button>
        <button class="tab" data-tab="benchmarks">üèÜ Benchmark Shops</button>
        <button class="tab" data-tab="simulator">‚öôÔ∏è Score Simulator</button>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="container content">
    
    <!-- Overview Tab -->
    <div id="overview" class="tab-content active">
      <div class="grid-5">
        <div class="stat-card">
          <div class="label">Total Shops</div>
          <div class="value">1,889</div>
          <div class="subtitle">with all 5 metrics</div>
        </div>
        <div class="stat-card" style="border-left-color: #10b981;">
          <div class="label">Benchmark Shops</div>
          <div class="value" style="color: #10b981;">86</div>
          <div class="subtitle">top 40% all metrics</div>
        </div>
        <div class="stat-card" style="border-left-color: #3b82f6;">
          <div class="label">Inspections</div>
          <div class="value" style="color: #3b82f6;">151,655</div>
          <div class="subtitle">12-month sample</div>
        </div>
        <div class="stat-card" style="border-left-color: #8b5cf6;">
          <div class="label">Metrics</div>
          <div class="value" style="color: #8b5cf6;">5</div>
          <div class="subtitle">quality indicators</div>
        </div>
        <div class="stat-card" style="border-left-color: #f59e0b;">
          <div class="label">Data Period</div>
          <div class="value" style="color: #f59e0b;">12 mo</div>
          <div class="subtitle">trailing window</div>
        </div>
      </div>

      <div class="summary-box">
        <h3>üìã Executive Summary</h3>
        <div class="summary-cols">
          <div>
            <h4>What We Found</h4>
            <ul>
              <li><span class="check">‚úì</span> <strong>86 shops</strong> (4.6%) qualify as benchmarks - top 40% in ALL metrics</li>
              <li><span class="check">‚úì</span> <strong>Edited image rate</strong> is highly variable (2% to 97%)</li>
              <li><span class="check">‚úì</span> <strong>Recommendations with images</strong> is the strongest quality indicator</li>
              <li><span class="warn">!</span> <strong>ARO doesn't correlate</strong> directly with inspection quality</li>
            </ul>
          </div>
          <div>
            <h4>Our Recommendations</h4>
            <ul>
              <li><span class="arrow">‚Üí</span> Weight <strong>Recs with Image (35%)</strong> highest</li>
              <li><span class="arrow">‚Üí</span> Set <strong>minimum thresholds</strong> at Q2 levels</li>
              <li><span class="arrow">‚Üí</span> Consider <strong>vehicle age/mileage</strong> adjustments</li>
              <li><span class="arrow">‚Üí</span> Make <strong>edited rate optional</strong> or configurable</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="card">
        <h3>üéØ Recommended Scoring Thresholds</h3>
        <table>
          <thead>
            <tr>
              <th>Metric</th>
              <th class="text-center">Weight</th>
              <th class="text-center text-red">Poor</th>
              <th class="text-center text-orange">Minimum</th>
              <th class="text-center text-blue">Target</th>
              <th class="text-center text-green">Excellent</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Avg Images per Inspection</td>
              <td class="text-center">25%</td>
              <td class="text-center text-red">&lt;10</td>
              <td class="text-center text-orange">17</td>
              <td class="text-center text-blue font-bold">25</td>
              <td class="text-center text-green">35+</td>
            </tr>
            <tr>
              <td>Edited Image Rate</td>
              <td class="text-center">15%</td>
              <td class="text-center text-red">&lt;2%</td>
              <td class="text-center text-orange">2%</td>
              <td class="text-center text-blue font-bold">20%</td>
              <td class="text-center text-green">40%+</td>
            </tr>
            <tr>
              <td>Avg Issues Found</td>
              <td class="text-center">25%</td>
              <td class="text-center text-red">&lt;8</td>
              <td class="text-center text-orange">22</td>
              <td class="text-center text-blue font-bold">35</td>
              <td class="text-center text-green">45+</td>
            </tr>
            <tr>
              <td>Recs with Image Rate</td>
              <td class="text-center">35%</td>
              <td class="text-center text-red">&lt;40%</td>
              <td class="text-center text-orange">62%</td>
              <td class="text-center text-blue font-bold">78%</td>
              <td class="text-center text-green">85%+</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Vehicle Segments Tab (NEW) -->
    <div id="segments" class="tab-content">
      <div class="alert alert-rose">
        <strong>üöó Critical Insight:</strong> Vehicle age and mileage dramatically affect expected findings. A new car with 30K miles should NOT have as many issues as a 12-year-old car with 180K miles. Scoring must account for this!
      </div>
      
      <div class="insight-box">
        <h4>üí° Key Finding: Issues Found Should Scale with Vehicle Age/Mileage</h4>
        <p>Based on 23,040 Ramsey inspections, we found:</p>
        <ul>
          <li><strong>2.2x more issues</strong> in 10+ year vehicles vs 0-3 year vehicles (11.9 vs 5.4)</li>
          <li><strong>2.1x more issues</strong> in 150K+ mileage vs 0-50K mileage (12.9 vs 6.0)</li>
          <li>An inspection finding only 5 issues on a high-mileage older vehicle is likely <strong>incomplete</strong></li>
        </ul>
      </div>

      <h3 style="margin-bottom: 16px;">üìä Metrics by Vehicle Age</h3>
      <div class="grid-4">
        <div class="segment-card">
          <div class="segment-label">0-3 Years</div>
          <div class="segment-value" style="color: #10b981;">5.4</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">2,648 inspections</div>
        </div>
        <div class="segment-card">
          <div class="segment-label">4-6 Years</div>
          <div class="segment-value" style="color: #3b82f6;">8.9</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">4,038 inspections</div>
        </div>
        <div class="segment-card">
          <div class="segment-label">7-10 Years</div>
          <div class="segment-value" style="color: #f59e0b;">10.7</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">6,490 inspections</div>
        </div>
        <div class="segment-card">
          <div class="segment-label">10+ Years</div>
          <div class="segment-value" style="color: #ef4444;">11.9</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">9,823 inspections</div>
        </div>
      </div>

      <div class="chart-grid">
        <div class="card">
          <h4>Avg Issues Found by Vehicle Age</h4>
          <div class="chart-container"><canvas id="chart-age-issues"></canvas></div>
        </div>
        <div class="card">
          <h4>Avg Images by Vehicle Age</h4>
          <div class="chart-container"><canvas id="chart-age-images"></canvas></div>
        </div>
      </div>

      <h3 style="margin-bottom: 16px;">üìä Metrics by Mileage Range</h3>
      <div class="grid-4">
        <div class="segment-card">
          <div class="segment-label">0-50K Miles</div>
          <div class="segment-value" style="color: #10b981;">6.0</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">4,524 inspections</div>
        </div>
        <div class="segment-card">
          <div class="segment-label">50K-100K Miles</div>
          <div class="segment-value" style="color: #3b82f6;">9.8</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">6,736 inspections</div>
        </div>
        <div class="segment-card">
          <div class="segment-label">100K-150K Miles</div>
          <div class="segment-value" style="color: #f59e0b;">11.8</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">6,460 inspections</div>
        </div>
        <div class="segment-card">
          <div class="segment-label">150K+ Miles</div>
          <div class="segment-value" style="color: #ef4444;">12.9</div>
          <div class="segment-metric">avg issues found</div>
          <div class="segment-count">5,281 inspections</div>
        </div>
      </div>

      <div class="chart-grid">
        <div class="card">
          <h4>Avg Issues Found by Mileage</h4>
          <div class="chart-container"><canvas id="chart-mileage-issues"></canvas></div>
        </div>
        <div class="card">
          <h4>Avg Images by Mileage</h4>
          <div class="chart-container"><canvas id="chart-mileage-images"></canvas></div>
        </div>
      </div>

      <div class="card">
        <h3>üî• Heat Map: Avg Issues Found by Age √ó Mileage</h3>
        <p style="color: #64748b; font-size: 13px; margin-bottom: 16px;">Higher numbers indicate more thorough inspections (expected for older/higher-mileage vehicles)</p>
        <table class="matrix-table">
          <thead>
            <tr>
              <th></th>
              <th>0-50K</th>
              <th>50K-100K</th>
              <th>100K-150K</th>
              <th>150K+</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="row-header">0-3 Years</td>
              <td class="heat-low">4.6<br><span style="font-size:10px;color:#666">n=2,064</span></td>
              <td class="heat-med-low">8.1<br><span style="font-size:10px;color:#666">n=520</span></td>
              <td class="heat-med">10.9<br><span style="font-size:10px;color:#666">n=48</span></td>
              <td class="heat-med-high">11.7<br><span style="font-size:10px;color:#666">n=16</span></td>
            </tr>
            <tr>
              <td class="row-header">4-6 Years</td>
              <td class="heat-low">6.9<br><span style="font-size:10px;color:#666">n=1,111</span></td>
              <td class="heat-med-low">9.3<br><span style="font-size:10px;color:#666">n=2,163</span></td>
              <td class="heat-med">11.1<br><span style="font-size:10px;color:#666">n=657</span></td>
              <td class="heat-med">10.0<br><span style="font-size:10px;color:#666">n=107</span></td>
            </tr>
            <tr>
              <td class="row-header">7-10 Years</td>
              <td class="heat-low">7.6<br><span style="font-size:10px;color:#666">n=561</span></td>
              <td class="heat-med">10.1<br><span style="font-size:10px;color:#666">n=2,524</span></td>
              <td class="heat-med-high">11.6<br><span style="font-size:10px;color:#666">n=2,431</span></td>
              <td class="heat-med-high">11.8<br><span style="font-size:10px;color:#666">n=974</span></td>
            </tr>
            <tr>
              <td class="row-header">10+ Years</td>
              <td class="heat-low">7.5<br><span style="font-size:10px;color:#666">n=787</span></td>
              <td class="heat-med">10.5<br><span style="font-size:10px;color:#666">n=1,529</span></td>
              <td class="heat-med-high">12.1<br><span style="font-size:10px;color:#666">n=3,323</span></td>
              <td class="heat-high">13.2<br><span style="font-size:10px;color:#666">n=4,184</span></td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="card">
        <h3>üìã Recommended Segment-Adjusted Thresholds for "Issues Found"</h3>
        <p style="color: #64748b; font-size: 13px; margin-bottom: 16px;">Instead of one fixed threshold, use these segment-specific expectations:</p>
        <table>
          <thead>
            <tr>
              <th>Vehicle Segment</th>
              <th class="text-center">Minimum Issues</th>
              <th class="text-center">Target Issues</th>
              <th class="text-center">Excellent Issues</th>
              <th class="text-center">Observed Avg</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>New</strong> (0-3 yrs, 0-50K mi)</td>
              <td class="text-center text-orange">3</td>
              <td class="text-center text-blue font-bold">5</td>
              <td class="text-center text-green">8+</td>
              <td class="text-center">4.6</td>
            </tr>
            <tr>
              <td><strong>Mid-Life</strong> (4-6 yrs, 50-100K mi)</td>
              <td class="text-center text-orange">6</td>
              <td class="text-center text-blue font-bold">10</td>
              <td class="text-center text-green">15+</td>
              <td class="text-center">9.3</td>
            </tr>
            <tr>
              <td><strong>Mature</strong> (7-10 yrs, 100-150K mi)</td>
              <td class="text-center text-orange">8</td>
              <td class="text-center text-blue font-bold">12</td>
              <td class="text-center text-green">18+</td>
              <td class="text-center">11.6</td>
            </tr>
            <tr>
              <td><strong>High-Mileage</strong> (10+ yrs, 150K+ mi)</td>
              <td class="text-center text-orange">10</td>
              <td class="text-center text-blue font-bold">15</td>
              <td class="text-center text-green">20+</td>
              <td class="text-center">13.2</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="alert alert-amber">
        <h4 style="margin-bottom: 8px;">‚ö†Ô∏è Scoring Implication</h4>
        <p>A technician inspecting a 2023 vehicle with 25K miles who finds 5 issues is doing a <strong>thorough job</strong>. The same technician inspecting a 2012 vehicle with 175K miles who finds 5 issues is likely <strong>rushing or missing problems</strong>. The scoring system must differentiate these scenarios.</p>
      </div>
    </div>

    <!-- Distributions Tab -->
    <div id="distributions" class="tab-content">
      <div class="alert alert-indigo">
        <strong>üìä How to Read:</strong> Each chart shows the max value for shops in each quintile (20% bucket). Top 20% are best performers, Bottom 20% need most improvement.
      </div>
      <div class="chart-grid">
        <div class="card">
          <h4>Avg Images per Inspection</h4>
          <div class="chart-container"><canvas id="chart-images"></canvas></div>
        </div>
        <div class="card">
          <h4>Edited Image Rate</h4>
          <div class="chart-container"><canvas id="chart-edited"></canvas></div>
        </div>
        <div class="card">
          <h4>Avg Issues Found per Inspection</h4>
          <div class="chart-container"><canvas id="chart-issues"></canvas></div>
        </div>
        <div class="card">
          <h4>Recommendations with Image Rate</h4>
          <div class="chart-container"><canvas id="chart-recs"></canvas></div>
        </div>
      </div>
      <div class="card">
        <h4>ARO Distribution (for reference - not in scoring)</h4>
        <div class="chart-container"><canvas id="chart-aro"></canvas></div>
      </div>
    </div>

    <!-- Recommendations Tab -->
    <div id="recommendations" class="tab-content">
      <div class="alert alert-green">
        <h3 style="margin-bottom: 8px;">üéØ Scoring Model Recommendation</h3>
        <p>Based on analysis of 1,889 shops, we recommend a <strong>4-metric weighted scoring model</strong> with thresholds derived from the top 40% of performers.</p>
      </div>
      
      <div class="grid-2">
        <div class="threshold-card">
          <div class="threshold-header">
            <div>
              <h4>Average Images per Inspection</h4>
              <div class="weight">Weight: 25%</div>
            </div>
            <span class="badge">Target: 25</span>
          </div>
          <div class="threshold-bar"></div>
          <div class="threshold-labels">
            <span>Poor<br>&lt;10</span>
            <span>Minimum<br>17</span>
            <span>Target<br>25</span>
            <span>Excellent<br>35+</span>
          </div>
          <div class="threshold-rationale">Visual documentation is critical for customer trust. Top shops average 25+ images.</div>
          <div class="threshold-insight">üí° 60% of shops take fewer than 17 images - major opportunity for improvement.</div>
        </div>
        
        <div class="threshold-card">
          <div class="threshold-header">
            <div>
              <h4>Edited Image Rate</h4>
              <div class="weight">Weight: 15%</div>
            </div>
            <span class="badge">Target: 20%</span>
          </div>
          <div class="threshold-bar"></div>
          <div class="threshold-labels">
            <span>Poor<br>&lt;2%</span>
            <span>Minimum<br>2%</span>
            <span>Target<br>20%</span>
            <span>Excellent<br>40%+</span>
          </div>
          <div class="threshold-rationale">Edited images (arrows, circles) increase customer understanding by 40%.</div>
          <div class="threshold-insight">üí° Highly variable metric - some top shops edit 90%+ while others edit &lt;5%.</div>
        </div>
        
        <div class="threshold-card">
          <div class="threshold-header">
            <div>
              <h4>Average Issues Found per Inspection</h4>
              <div class="weight">Weight: 25%</div>
            </div>
            <span class="badge">Target: 35 (adj.)</span>
          </div>
          <div class="threshold-bar"></div>
          <div class="threshold-labels">
            <span>Poor<br>&lt;8</span>
            <span>Minimum<br>22</span>
            <span>Target<br>35</span>
            <span>Excellent<br>45+</span>
          </div>
          <div class="threshold-rationale">More findings = more thorough inspection. Should scale with vehicle age/mileage.</div>
          <div class="threshold-insight">üí° See "Vehicle Segments" tab for age/mileage adjusted thresholds.</div>
        </div>
        
        <div class="threshold-card">
          <div class="threshold-header">
            <div>
              <h4>Recommendations with Image Rate</h4>
              <div class="weight">Weight: 35%</div>
            </div>
            <span class="badge">Target: 78%</span>
          </div>
          <div class="threshold-bar"></div>
          <div class="threshold-labels">
            <span>Poor<br>&lt;40%</span>
            <span>Minimum<br>62%</span>
            <span>Target<br>78%</span>
            <span>Excellent<br>85%+</span>
          </div>
          <div class="threshold-rationale">Every recommendation should have photo proof. Strongest quality indicator.</div>
          <div class="threshold-insight">üí° Top 40% of shops support 62%+ of recommendations with images.</div>
        </div>
      </div>
      
      <div class="card">
        <h3>üìù Proposed Grading Scale</h3>
        <div class="grade-cards">
          <div class="grade-card" style="background: #10b98115; border-color: #10b981;">
            <div class="grade" style="color: #10b981;">A</div>
            <div class="range">85-100</div>
            <div class="label">Excellent</div>
          </div>
          <div class="grade-card" style="background: #3b82f615; border-color: #3b82f6;">
            <div class="grade" style="color: #3b82f6;">B</div>
            <div class="range">70-84</div>
            <div class="label">Good</div>
          </div>
          <div class="grade-card" style="background: #f59e0b15; border-color: #f59e0b;">
            <div class="grade" style="color: #f59e0b;">C</div>
            <div class="range">55-69</div>
            <div class="label">Average</div>
          </div>
          <div class="grade-card" style="background: #f9731615; border-color: #f97316;">
            <div class="grade" style="color: #f97316;">D</div>
            <div class="range">40-54</div>
            <div class="label">Below Avg</div>
          </div>
          <div class="grade-card" style="background: #ef444415; border-color: #ef4444;">
            <div class="grade" style="color: #ef4444;">F</div>
            <div class="range">0-39</div>
            <div class="label">Poor</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Benchmarks Tab -->
    <div id="benchmarks" class="tab-content">
      <div class="alert alert-indigo">
        <strong>üèÜ Benchmark Criteria:</strong> Shops must be in the top 40% (Q1 or Q2) for ALL 4 inspection quality metrics. 86 shops (4.6% of total) meet this standard.
      </div>
      
      <div class="grid-5">
        <div class="stat-card">
          <div class="label">Avg Images</div>
          <div class="value">25.3</div>
          <div class="subtitle">median</div>
        </div>
        <div class="stat-card" style="border-left-color: #8b5cf6;">
          <div class="label">Edited Rate</div>
          <div class="value" style="color: #8b5cf6;">33%</div>
          <div class="subtitle">median</div>
        </div>
        <div class="stat-card">
          <div class="label">Avg Issues</div>
          <div class="value">36.6</div>
          <div class="subtitle">median</div>
        </div>
        <div class="stat-card" style="border-left-color: #10b981;">
          <div class="label">Recs w/ Image</div>
          <div class="value" style="color: #10b981;">78%</div>
          <div class="subtitle">median</div>
        </div>
        <div class="stat-card" style="border-left-color: #f59e0b;">
          <div class="label">Avg ARO</div>
          <div class="value" style="color: #f59e0b;">$620</div>
          <div class="subtitle">median</div>
        </div>
      </div>
      
      <div class="card">
        <h3>Top 15 Benchmark Shops (by inspection volume)</h3>
        <table>
          <thead>
            <tr>
              <th>Shop ID</th>
              <th class="text-right">Inspections</th>
              <th class="text-right">Avg Images</th>
              <th class="text-right">Edited %</th>
              <th class="text-right">Avg Issues</th>
              <th class="text-right">Recs w/ Img</th>
              <th class="text-right">ARO</th>
            </tr>
          </thead>
          <tbody>
            <tr><td class="font-mono text-indigo font-bold">12786</td><td class="text-right font-bold">5,121</td><td class="text-right">19.6</td><td class="text-right">20.0%</td><td class="text-right">27.5</td><td class="text-right">95.4%</td><td class="text-right">$361</td></tr>
            <tr><td class="font-mono text-indigo font-bold">13745</td><td class="text-right font-bold">4,565</td><td class="text-right">17.2</td><td class="text-right">2.8%</td><td class="text-right">38.8</td><td class="text-right">67.5%</td><td class="text-right">$646</td></tr>
            <tr><td class="font-mono text-indigo font-bold">14104</td><td class="text-right font-bold">4,442</td><td class="text-right">28.8</td><td class="text-right">39.1%</td><td class="text-right">24.3</td><td class="text-right">74.3%</td><td class="text-right">$650</td></tr>
            <tr><td class="font-mono text-indigo font-bold">13939</td><td class="text-right font-bold">4,282</td><td class="text-right">18.1</td><td class="text-right">97.0%</td><td class="text-right">37.0</td><td class="text-right">71.3%</td><td class="text-right">$414</td></tr>
            <tr><td class="font-mono text-indigo font-bold">13796</td><td class="text-right font-bold">3,779</td><td class="text-right">19.4</td><td class="text-right">66.3%</td><td class="text-right">30.8</td><td class="text-right">88.9%</td><td class="text-right">$351</td></tr>
            <tr><td class="font-mono text-indigo font-bold">13936</td><td class="text-right font-bold">3,759</td><td class="text-right">17.4</td><td class="text-right">85.2%</td><td class="text-right">33.8</td><td class="text-right">68.4%</td><td class="text-right">$401</td></tr>
            <tr><td class="font-mono text-indigo font-bold">13937</td><td class="text-right font-bold">3,675</td><td class="text-right">20.3</td><td class="text-right">71.2%</td><td class="text-right">35.9</td><td class="text-right">90.2%</td><td class="text-right">$557</td></tr>
            <tr><td class="font-mono text-indigo font-bold">13656</td><td class="text-right font-bold">3,542</td><td class="text-right">26.1</td><td class="text-right">84.3%</td><td class="text-right">36.3</td><td class="text-right">87.8%</td><td class="text-right">$370</td></tr>
            <tr><td class="font-mono text-indigo font-bold">13938</td><td class="text-right font-bold">3,466</td><td class="text-right">19.7</td><td class="text-right">82.1%</td><td class="text-right">39.9</td><td class="text-right">88.8%</td><td class="text-right">$373</td></tr>
            <tr><td class="font-mono text-indigo font-bold">1585</td><td class="text-right font-bold">3,389</td><td class="text-right">41.3</td><td class="text-right">4.4%</td><td class="text-right">42.0</td><td class="text-right">86.5%</td><td class="text-right">$934</td></tr>
            <tr><td class="font-mono text-indigo font-bold">8240</td><td class="text-right font-bold">3,183</td><td class="text-right">23.4</td><td class="text-right">92.8%</td><td class="text-right">33.0</td><td class="text-right">85.0%</td><td class="text-right">$309</td></tr>
            <tr><td class="font-mono text-indigo font-bold">4476</td><td class="text-right font-bold">3,171</td><td class="text-right">23.0</td><td class="text-right">16.5%</td><td class="text-right">39.6</td><td class="text-right">81.1%</td><td class="text-right">$553</td></tr>
            <tr><td class="font-mono text-indigo font-bold">9096</td><td class="text-right font-bold">3,105</td><td class="text-right">17.9</td><td class="text-right">8.3%</td><td class="text-right">41.7</td><td class="text-right">82.2%</td><td class="text-right">$539</td></tr>
            <tr><td class="font-mono text-indigo font-bold">12630</td><td class="text-right font-bold">3,031</td><td class="text-right">19.3</td><td class="text-right">24.6%</td><td class="text-right">23.6</td><td class="text-right">96.8%</td><td class="text-right">$142</td></tr>
            <tr><td class="font-mono text-indigo font-bold">10530</td><td class="text-right font-bold">3,014</td><td class="text-right">32.8</td><td class="text-right">50.8%</td><td class="text-right">49.2</td><td class="text-right">95.7%</td><td class="text-right">$622</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Simulator Tab -->
    <div id="simulator" class="tab-content">
      <div class="alert alert-purple">
        <strong>‚öôÔ∏è Score Simulator:</strong> Enter inspection metrics below to see how the proposed scoring model would grade an inspection.
      </div>
      
      <div class="sim-grid">
        <div class="card">
          <h3>Enter Inspection Metrics</h3>
          
          <div class="slider-group">
            <label>Average Images: <span id="val-images">25</span></label>
            <input type="range" id="slider-images" min="0" max="60" value="25">
            <div class="slider-hints">
              <span>0</span>
              <span class="hint-orange">Min: 17</span>
              <span class="hint-blue">Target: 25</span>
              <span class="hint-green">35+</span>
            </div>
          </div>
          
          <div class="slider-group">
            <label>Edited Image Rate: <span id="val-edited">15%</span></label>
            <input type="range" id="slider-edited" min="0" max="100" value="15">
            <div class="slider-hints">
              <span>0%</span>
              <span class="hint-orange">Min: 2%</span>
              <span class="hint-blue">Target: 20%</span>
              <span class="hint-green">40%+</span>
            </div>
          </div>
          
          <div class="slider-group">
            <label>Average Issues Found: <span id="val-issues">30</span></label>
            <input type="range" id="slider-issues" min="0" max="60" value="30">
            <div class="slider-hints">
              <span>0</span>
              <span class="hint-orange">Min: 22</span>
              <span class="hint-blue">Target: 35</span>
              <span class="hint-green">45+</span>
            </div>
          </div>
          
          <div class="slider-group">
            <label>Recs with Image: <span id="val-recs">75%</span></label>
            <input type="range" id="slider-recs" min="0" max="100" value="75">
            <div class="slider-hints">
              <span>0%</span>
              <span class="hint-orange">Min: 62%</span>
              <span class="hint-blue">Target: 78%</span>
              <span class="hint-green">85%+</span>
            </div>
          </div>
        </div>
        
        <div>
          <div class="score-display">
            <div class="title">Overall Inspection Score</div>
            <div class="score-row">
              <div class="score-number" id="total-score">68</div>
              <div>
                <div class="score-grade" id="total-grade">C</div>
                <div class="score-label" id="total-label">Average</div>
              </div>
            </div>
            <div class="score-bar">
              <div class="score-bar-fill" id="total-bar" style="width: 68%;"></div>
            </div>
          </div>
          
          <div class="card">
            <h4>Component Scores</h4>
            <div class="component-scores">
              <div class="component-row">
                <div class="component-label">Avg Images</div>
                <div class="component-bar"><div class="component-bar-fill" id="bar-images" style="width: 75%;"></div></div>
                <div class="component-score" id="score-images">75</div>
                <div class="component-weight">√ó25%</div>
              </div>
              <div class="component-row">
                <div class="component-label">Edited Rate</div>
                <div class="component-bar"><div class="component-bar-fill" id="bar-edited" style="width: 50%;"></div></div>
                <div class="component-score" id="score-edited">50</div>
                <div class="component-weight">√ó15%</div>
              </div>
              <div class="component-row">
                <div class="component-label">Avg Issues</div>
                <div class="component-bar"><div class="component-bar-fill" id="bar-issues" style="width: 65%;"></div></div>
                <div class="component-score" id="score-issues">65</div>
                <div class="component-weight">√ó25%</div>
              </div>
              <div class="component-row">
                <div class="component-label">Recs w/ Image</div>
                <div class="component-bar"><div class="component-bar-fill" id="bar-recs" style="width: 70%;"></div></div>
                <div class="component-score" id="score-recs">70</div>
                <div class="component-weight">√ó35%</div>
              </div>
            </div>
          </div>
          
          <div class="alert alert-amber tips-box">
            <h4>üí° Quick Improvements</h4>
            <ul id="tips-list">
              <li>Attach images to more recommendations (+35% weight)</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>Inspection Scoring Benchmark Analysis ‚Ä¢ AutoVitals DVI Data</p>
    <p style="color: #64748b;">Based on 1,889 shops ‚Ä¢ 23,040 segment inspections ‚Ä¢ December 2024</p>
  </div>

  <script>
    // Tab switching
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
        
        // Initialize charts when tabs are shown
        if (tab.dataset.tab === 'distributions' && !window.distChartsInit) {
          initDistributionCharts();
          window.distChartsInit = true;
        }
        if (tab.dataset.tab === 'segments' && !window.segmentChartsInit) {
          initSegmentCharts();
          window.segmentChartsInit = true;
        }
      });
    });

    // Distribution charts
    function initDistributionCharts() {
      const colors = ['#10b981', '#3b82f6', '#f59e0b', '#f97316', '#ef4444'];
      const labels = ['Top 20%', 'Q2 (20-40%)', 'Q3 (40-60%)', 'Q4 (60-80%)', 'Bottom 20%'];
      
      const chartConfig = (data) => ({
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            data: data,
            backgroundColor: colors,
            borderRadius: 4
          }]
        },
        options: {
          indexAxis: 'y',
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            x: { grid: { color: '#e2e8f0' } },
            y: { grid: { display: false } }
          }
        }
      });

      new Chart(document.getElementById('chart-images'), chartConfig([88.5, 23.3, 16.9, 11.3, 5.8]));
      new Chart(document.getElementById('chart-edited'), chartConfig([97.8, 19.2, 1.9, 0.3, 0.01]));
      new Chart(document.getElementById('chart-issues'), chartConfig([108.6, 31.8, 21.7, 8.4, 5.0]));
      new Chart(document.getElementById('chart-recs'), chartConfig([100, 73.2, 61.5, 47.9, 32.0]));
      new Chart(document.getElementById('chart-aro'), chartConfig([11593, 988, 699, 528, 390]));
    }

    // Segment charts
    function initSegmentCharts() {
      const ageLabels = ['0-3 Years', '4-6 Years', '7-10 Years', '10+ Years'];
      const mileageLabels = ['0-50K', '50K-100K', '100K-150K', '150K+'];
      const ageColors = ['#10b981', '#3b82f6', '#f59e0b', '#ef4444'];
      const mileageColors = ['#10b981', '#3b82f6', '#f59e0b', '#ef4444'];

      // Age - Issues
      new Chart(document.getElementById('chart-age-issues'), {
        type: 'bar',
        data: {
          labels: ageLabels,
          datasets: [{
            label: 'Avg Issues Found',
            data: [5.4, 8.9, 10.7, 11.9],
            backgroundColor: ageColors,
            borderRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: { beginAtZero: true, max: 15, grid: { color: '#e2e8f0' } },
            x: { grid: { display: false } }
          }
        }
      });

      // Age - Images
      new Chart(document.getElementById('chart-age-images'), {
        type: 'bar',
        data: {
          labels: ageLabels,
          datasets: [{
            label: 'Avg Images',
            data: [30.1, 33.2, 34.3, 34.6],
            backgroundColor: ageColors,
            borderRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: { beginAtZero: true, max: 40, grid: { color: '#e2e8f0' } },
            x: { grid: { display: false } }
          }
        }
      });

      // Mileage - Issues
      new Chart(document.getElementById('chart-mileage-issues'), {
        type: 'bar',
        data: {
          labels: mileageLabels,
          datasets: [{
            label: 'Avg Issues Found',
            data: [6.0, 9.8, 11.8, 12.9],
            backgroundColor: mileageColors,
            borderRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: { beginAtZero: true, max: 15, grid: { color: '#e2e8f0' } },
            x: { grid: { display: false } }
          }
        }
      });

      // Mileage - Images
      new Chart(document.getElementById('chart-mileage-images'), {
        type: 'bar',
        data: {
          labels: mileageLabels,
          datasets: [{
            label: 'Avg Images',
            data: [30.2, 33.5, 35.0, 35.6],
            backgroundColor: mileageColors,
            borderRadius: 6
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { display: false } },
          scales: {
            y: { beginAtZero: true, max: 40, grid: { color: '#e2e8f0' } },
            x: { grid: { display: false } }
          }
        }
      });
    }

    // Score calculator
    const thresholds = {
      images: { poor: 10, min: 17, target: 25, excellent: 35, weight: 25 },
      edited: { poor: 0, min: 2, target: 20, excellent: 40, weight: 15 },
      issues: { poor: 8, min: 22, target: 35, excellent: 45, weight: 25 },
      recs: { poor: 40, min: 62, target: 78, excellent: 85, weight: 35 }
    };

    function calcComponentScore(value, t) {
      if (value >= t.excellent) return 100;
      if (value >= t.target) return 75 + 25 * (value - t.target) / (t.excellent - t.target);
      if (value >= t.min) return 50 + 25 * (value - t.min) / (t.target - t.min);
      if (value >= t.poor) return 25 * (value - t.poor) / (t.min - t.poor);
      return 0;
    }

    function getGrade(score) {
      if (score >= 85) return { grade: 'A', color: '#10b981', label: 'Excellent' };
      if (score >= 70) return { grade: 'B', color: '#3b82f6', label: 'Good' };
      if (score >= 55) return { grade: 'C', color: '#f59e0b', label: 'Average' };
      if (score >= 40) return { grade: 'D', color: '#f97316', label: 'Below Average' };
      return { grade: 'F', color: '#ef4444', label: 'Poor' };
    }

    function updateScores() {
      const values = {
        images: parseInt(document.getElementById('slider-images').value),
        edited: parseInt(document.getElementById('slider-edited').value),
        issues: parseInt(document.getElementById('slider-issues').value),
        recs: parseInt(document.getElementById('slider-recs').value)
      };

      document.getElementById('val-images').textContent = values.images;
      document.getElementById('val-edited').textContent = values.edited + '%';
      document.getElementById('val-issues').textContent = values.issues;
      document.getElementById('val-recs').textContent = values.recs + '%';

      const scores = {
        images: Math.round(calcComponentScore(values.images, thresholds.images)),
        edited: Math.round(calcComponentScore(values.edited, thresholds.edited)),
        issues: Math.round(calcComponentScore(values.issues, thresholds.issues)),
        recs: Math.round(calcComponentScore(values.recs, thresholds.recs))
      };

      const total = Math.round(
        scores.images * 0.25 + 
        scores.edited * 0.15 + 
        scores.issues * 0.25 + 
        scores.recs * 0.35
      );

      const grade = getGrade(total);

      document.getElementById('total-score').textContent = total;
      document.getElementById('total-score').style.color = grade.color;
      document.getElementById('total-grade').textContent = grade.grade;
      document.getElementById('total-grade').style.color = grade.color;
      document.getElementById('total-label').textContent = grade.label;
      document.getElementById('total-bar').style.width = total + '%';
      document.getElementById('total-bar').style.backgroundColor = grade.color;

      ['images', 'edited', 'issues', 'recs'].forEach(key => {
        const g = getGrade(scores[key]);
        document.getElementById('score-' + key).textContent = scores[key];
        document.getElementById('score-' + key).style.color = g.color;
        document.getElementById('bar-' + key).style.width = scores[key] + '%';
        document.getElementById('bar-' + key).style.backgroundColor = g.color;
      });

      const tips = [];
      if (scores.recs < 75) tips.push('Attach images to more recommendations (+35% weight)');
      if (scores.issues < 50) tips.push('Complete more inspection topics thoroughly');
      if (scores.images < 50) tips.push('Take more photos during inspection');
      if (scores.edited < 25) tips.push('Add arrows/circles to highlight issues');
      if (total >= 85) tips.push('‚úì Excellent! This meets top-tier standards.');
      
      document.getElementById('tips-list').innerHTML = tips.map(t => '<li>' + t + '</li>').join('');
    }

    ['images', 'edited', 'issues', 'recs'].forEach(id => {
      document.getElementById('slider-' + id).addEventListener('input', updateScores);
    });

    updateScores();
  </script>
</body>
</html>
